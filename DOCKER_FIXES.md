# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker —Å–±–æ—Ä–∫–∏

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ Docker –æ–±—Ä–∞–∑–∞:

```
npm error The `npm ci` command can only install with an existing package-lock.json
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π Dockerfile**

- –ó–∞–º–µ–Ω–∏–ª `npm ci --only=production` –Ω–∞ `npm install --omit=dev`
- –£–±—Ä–∞–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `package-lock.json`
- –î–æ–±–∞–≤–∏–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ Prisma –∫–ª–∏–µ–Ω—Ç–∞

### 2. **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π Dockerfile.simple**

–°–æ–∑–¥–∞–Ω –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π Dockerfile –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã.

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–µ–ø–ª–æ—è**

#### **–û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**

```bash
./deploy.sh
```

#### **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞:**

```bash
docker-compose -f docker-compose.simple.yml up -d --build
```

#### **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–±–æ—Ä–∫–∞:**

```bash
docker-compose -f docker-compose.prod.yml up -d --build
```

## üöÄ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**

### 1. **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª:**

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
POSTGRES_PASSWORD=your_secure_password

# Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TELEGRAM_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_telegram_chat_id
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# URL —Å–∞–π—Ç–∞
NUXT_PUBLIC_SITE_URL=https://your-domain.com
```

### 2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π:**

```bash
chmod +x deploy.sh
./deploy.sh
```

## üìã **–î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–±–æ—Ä–∫–∏**

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
docker-compose -f docker-compose.simple.yml up -d --build
```

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `Dockerfile.simple`
- –û–¥–Ω–∞ —Å—Ç–∞–¥–∏—è —Å–±–æ—Ä–∫–∏
- –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞**

```bash
docker-compose -f docker-compose.prod.yml up -d --build
```

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `Dockerfile`
- –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å Nginx**

```bash
docker-compose up -d --build
```

- –í–∫–ª—é—á–∞–µ—Ç Redis –∏ Nginx
- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üîç **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞**

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose -f docker-compose.simple.yml ps

# –õ–æ–≥–∏
docker-compose -f docker-compose.simple.yml logs -f

# Health check
curl http://localhost:3015/api/health
```

## üõ†Ô∏è **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫**

### **–ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```bash
# –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ Docker –∫—ç—à–∏
docker system prune -a

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –±–µ–∑ –∫—ç—à–∞
docker-compose -f docker-compose.simple.yml build --no-cache

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose -f docker-compose.simple.yml up -d
```

### **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏:**

```bash
docker-compose -f docker-compose.simple.yml logs app
```

## üìä **–†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É Dockerfile**

| –§—É–Ω–∫—Ü–∏—è             | Dockerfile | Dockerfile.simple |
| ------------------- | ---------- | ----------------- |
| –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ | ‚úÖ         | ‚ùå                |
| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ | ‚úÖ         | ‚ùå                |
| –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å        | ‚ö†Ô∏è         | ‚úÖ                |
| –°–∫–æ—Ä–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏     | ‚ö†Ô∏è         | ‚úÖ                |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å           | –í—ã—Å–æ–∫–∞—è    | –ù–∏–∑–∫–∞—è            |

## üéØ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—É–ø—Ä–æ—â–µ–Ω–Ω—É—é —Å–±–æ—Ä–∫—É**:

```bash
./deploy.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `docker-compose.simple.yml` –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.
